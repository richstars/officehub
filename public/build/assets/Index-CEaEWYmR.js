import{u as J,I as fe,g as l,a as F,d as i,h as ve,w as K,b as e,i as f,m as c,f as m,j as b,p as B,l as be,k as L,o as r,F as _,q as j,t as d,e as H,n as xe,s as Q,v as ge,x as me,y as X,J as we,A as he}from"./app-De8mb7Sa.js";import{A as ye}from"./AuthenticatedLayout-BBycf8fi.js";import{r as ke,a as Ce,u as _e}from"./xlsx-BMdGRe6x.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Me={class:"min-h-screen bg-gray-50 pb-20"},je={class:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-blue-800 to-sky-500 bg-[length:300%_300%] animate-gradient-flow px-6 py-10 shadow-lg border-b border-white/10 pb-24"},ze={class:"max-w-7xl mx-auto relative z-10"},Se={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8"},Be={class:"flex gap-3"},Le={class:"flex flex-col md:flex-row gap-3"},Ae={class:"relative flex-1 max-w-2xl"},Pe={class:"mt-8 flex items-center gap-4 animate-fade-in-up"},Ve={class:"max-w-7xl mx-auto px-6 -mt-16 relative z-20 space-y-6"},Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},He={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},De={class:"h-64"},Ue={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},Te={class:"h-64"},$e={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},Ne={class:"overflow-x-auto"},Ee={class:"w-full text-left text-sm text-gray-600"},Ie={class:"divide-y divide-gray-50"},Oe={class:"px-6 py-4 font-medium text-gray-900"},Re={class:"flex items-center gap-3"},qe={class:"flex-shrink-0 h-8 w-8 rounded bg-gray-100 flex items-center justify-center text-gray-500 font-bold text-xs uppercase relative"},We={key:0,class:"absolute -top-1 -right-1 bg-white rounded-full p-0.5 shadow-sm"},Je={class:"flex flex-col"},Ke={key:0,class:"text-[10px] text-orange-500 font-bold flex items-center gap-1"},Qe={class:"px-6 py-4 text-xs font-mono"},Xe={class:"px-6 py-4"},Ze={class:"flex flex-col gap-4"},Ge={class:"font-bold text-gray-700 mb-1.5"},Ye={class:"flex flex-wrap gap-1.5"},et={class:"px-6 py-4 text-xs"},tt={class:"px-6 py-4 text-xs"},ot={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},st={class:"flex justify-end gap-2 items-center"},lt=["onClick"],rt=["onClick"],nt=["onClick"],at={key:0},it={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm"},dt={class:"bg-white rounded-2xl shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]"},ut={class:"p-5 border-b border-gray-100 flex justify-between items-center"},ct={class:"p-6 overflow-y-auto custom-scrollbar"},pt={class:"flex flex-col items-center pointer-events-none"},ft={key:0,class:"text-sm font-medium text-gray-600"},vt={key:1,class:"text-sm font-bold text-blue-600 truncate max-w-[200px]"},bt={class:"grid grid-cols-2 gap-4"},xt={class:"space-y-4"},gt=["onClick"],mt={class:"mb-3"},wt={class:"block text-[10px] font-bold text-gray-500 uppercase mb-1"},ht=["onUpdate:modelValue"],yt=["value"],kt={class:"space-y-2"},Ct=["onUpdate:modelValue"],_t=["value"],Mt=["onClick"],jt=["onClick"],zt={class:"pt-2 border-t mt-2"},St={class:"flex items-center gap-2 mb-2"},Bt={key:0},Lt={class:"p-5 border-t border-gray-100 flex gap-3"},At=["disabled"],Pt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},Vt={class:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6 text-center"},Ft={class:"text-sm text-gray-500 mb-4"},Ht={class:"flex gap-2"},Dt={type:"submit",class:"flex-1 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-sm font-bold"},Ut={key:2,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-fade-in"},Tt={class:"bg-gray-900 rounded-xl shadow-2xl w-full max-w-6xl h-[85vh] flex flex-col overflow-hidden relative"},$t={class:"flex items-center justify-between px-4 py-3 bg-white/5 border-b border-white/10"},Nt={class:"text-white font-medium truncate max-w-md"},Et={class:"flex-1 bg-black/50 flex items-center justify-center relative overflow-hidden"},It={key:0,class:"w-full h-full overflow-auto flex items-center justify-center p-4"},Ot=["src"],Rt={class:"absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-4 bg-gray-800/80 backdrop-blur-md px-4 py-2 rounded-full text-white shadow-xl border border-white/10 z-20"},qt=["disabled"],Wt={class:"font-mono text-sm min-w-[3ch] text-center"},Jt=["disabled"],Kt=["src"],Qt={key:2,class:"w-full h-full bg-gray-100 overflow-auto p-8 flex justify-center"},Xt={key:0,class:"flex flex-col items-center justify-center p-10"},Zt={key:1,class:"text-red-500 p-4 text-center bg-red-50 rounded-lg border border-red-200"},Gt={key:3,class:"w-full h-full bg-white overflow-auto p-4"},Yt={key:0,class:"flex flex-col items-center justify-center p-10"},eo={key:1,class:"text-red-500 p-4 text-center bg-red-50 rounded-lg border border-red-200"},to={key:4,class:"w-full h-full flex flex-col items-center justify-center p-10 text-center bg-gray-50"},oo={key:5,class:"text-center p-10"},ao={__name:"Index",props:{reports:Array,airportStats:Array,airlineStats:Array,airports:Array,airlines:Array},setup(T){const M=T,D=c(""),A=c(!1),U=c(!1),z=c(!1),w=c(""),x=c(null),P=c("download"),$=c(!1),h=c(null),v=c(1),V=c(null),N=c(null),S=c(!1),k=c(null),n=J({name:"",start_date:"",end_date:"",file:null,is_secure:!1,password:"",locations:[{airport_id:"",airlines:[""]}]}),Z=L(()=>({chart:{type:"bar",toolbar:{show:!1},fontFamily:"Inter, sans-serif"},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%"}},dataLabels:{enabled:!1},xaxis:{categories:M.airportStats.map(o=>o.name),labels:{style:{colors:"#64748b"},formatter:o=>Math.floor(o)},forceNiceScale:!0,tickAmount:5},yaxis:{labels:{style:{colors:"#64748b",fontSize:"11px"}}},colors:["#3b82f6"],grid:{borderColor:"#f1f5f9",strokeDashArray:4},tooltip:{theme:"light",y:{formatter:o=>Math.floor(o)}}})),G=L(()=>[{name:"Frekuensi",data:M.airportStats.map(o=>o.count)}]),Y=L(()=>({chart:{type:"bar",toolbar:{show:!1},fontFamily:"Inter, sans-serif"},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"70%",distributed:!0}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},offsetX:0},xaxis:{categories:M.airlineStats.map(o=>o.name),labels:{style:{colors:"#64748b"},formatter:o=>Math.floor(o)}},yaxis:{labels:{show:!0,style:{colors:"#64748b",fontSize:"11px",fontWeight:700},maxWidth:200}},colors:M.airlineStats.map(o=>o.color||"#3b82f6"),legend:{show:!1},grid:{borderColor:"#f1f5f9",strokeDashArray:4},tooltip:{theme:"light",y:{formatter:o=>Math.floor(o)}}})),ee=L(()=>[{name:"Frekuensi",data:M.airlineStats.map(o=>({x:o.name,y:o.count}))}]),te=o=>{U.value=!1;const t=o.dataTransfer.files;t.length>0&&(n.file=t[0],n.name||(n.name=t[0].name.split(".").slice(0,-1).join(".")))},oe=o=>{const t=o.target.files;t.length>0&&(n.file=t[0],n.name||(n.name=t[0].name.split(".").slice(0,-1).join(".")))},se=()=>{n.locations.push({airport_id:"",airlines:[""]})},le=o=>{n.locations.splice(o,1)},re=o=>{n.locations[o].airlines.push("")},ne=(o,t)=>{n.locations[o].airlines.splice(t,1)},I=()=>{n.post(route("supervision-reports.store"),{onSuccess:()=>{A.value=!1,n.reset()}})},O=L(()=>{if(!D.value)return M.reports;const o=D.value.toLowerCase();return M.reports.filter(t=>t.name.toLowerCase().includes(o))}),ae=o=>{if(!o)return"default";const t=o.split(".").pop().toLowerCase();return["pdf"].includes(t)?"pdf":["doc","docx"].includes(t)?"word":["xls","xlsx","csv"].includes(t)?"excel":["ppt","pptx"].includes(t)?"ppt":["jpg","jpeg","png","gif","webp"].includes(t)?"image":["zip","rar"].includes(t)?"zip":"default"},ie=o=>{confirm("Are you sure you want to delete this report?")&&J({}).delete(route("supervision-reports.destroy",o.id))},E=o=>{o.is_secure?(x.value=o,w.value="",P.value="download",z.value=!0):R(route("supervision-reports.download",o.id),{})},de=async()=>{if(x.value){if(P.value==="download")R(route("supervision-reports.download",x.value.id),{password:w.value}),z.value=!1,w.value="",x.value=null;else if(P.value==="preview")try{await we.post(route("supervision-reports.verify-password",x.value.id),{password:w.value});const o=x.value;z.value=!1,w.value="",x.value=null,q(o)}catch{alert("Incorrect password."),w.value=""}}},R=(o,t)=>{const p=document.createElement("form");p.method="POST",p.action=o;const s=document.querySelector('meta[name="csrf-token"]');if(s){const a=document.createElement("input");a.type="hidden",a.name="_token",a.value=s.getAttribute("content"),p.appendChild(a)}for(const a in t){const u=document.createElement("input");u.type="hidden",u.name=a,u.value=t[a],p.appendChild(u)}document.body.appendChild(p),p.submit(),document.body.removeChild(p)},y=L(()=>{if(!h.value)return null;const t=h.value.file_path.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(t)?"image":["pdf"].includes(t)?"pdf":["doc","docx"].includes(t)?"word":["xls","xlsx","csv"].includes(t)?"excel":["ppt","pptx"].includes(t)?"ppt":"other"}),ue=o=>{o.is_secure?(x.value=o,w.value="",P.value="preview",z.value=!0):q(o)},q=async o=>{if(h.value=o,v.value=1,$.value=!0,k.value=null,y.value==="word"||y.value==="excel"){S.value=!0;try{const t=await fetch(o.file_path);if(!t.ok)throw new Error("Failed to load file");const p=await t.blob();if(await he(),y.value==="word")V.value&&(V.value.innerHTML="",await ke(p,V.value,V.value,{className:"docx-preview",inWrapper:!0}));else if(y.value==="excel"&&N.value){const s=await p.arrayBuffer(),a=Ce(s),u=a.SheetNames[0],C=a.Sheets[u],g=_e.sheet_to_html(C,{id:"excel-table",editable:!1});N.value.innerHTML=g}}catch(t){console.error("Error rendering office file:",t),k.value="Failed to render preview."}finally{S.value=!1}}},W=()=>{$.value=!1,h.value=null,v.value=1},ce=()=>{v.value<3&&(v.value+=.25)},pe=()=>{v.value>.5&&(v.value-=.25)};return(o,t)=>{const p=fe("apexchart");return r(),l(_,null,[F(i(ve),{title:"Laporan Hasil Pengawasan"}),F(ye,null,{default:K(()=>[e("div",Me,[e("div",je,[t[23]||(t[23]=e("div",{class:"absolute inset-0 bg-[radial-gradient(rgba(255,255,255,0.15)_1px,transparent_1px)] [background-size:20px_20px]"},null,-1)),t[24]||(t[24]=e("div",{class:"absolute inset-0 bg-white/5 backdrop-blur-[1px]"},null,-1)),t[25]||(t[25]=e("div",{class:"absolute -top-20 -right-20 h-80 w-80 rounded-full bg-sky-400/20 blur-3xl mix-blend-overlay"},null,-1)),t[26]||(t[26]=e("div",{class:"absolute -bottom-20 -left-20 h-80 w-80 rounded-full bg-blue-900/40 blur-3xl"},null,-1)),e("div",ze,[e("div",Se,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-4xl font-extrabold text-white tracking-tight drop-shadow-md"},"Page File"),e("p",{class:"text-blue-100 text-sm mt-1 font-medium opacity-90"},"Manage and organize your documents.")],-1)),e("div",Be,[e("button",{onClick:t[0]||(t[0]=s=>A.value=!0),class:"bg-white text-blue-900 hover:bg-blue-50 px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-md hover:shadow-lg flex items-center gap-2"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Upload File ",-1)])])])]),e("div",Le,[e("div",Ae,[t[18]||(t[18]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-blue-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>D.value=s),type:"text",placeholder:"Search files...",class:"block w-full rounded-2xl border border-white/20 bg-white/10 backdrop-blur-md py-4 pl-12 pr-12 text-white placeholder-blue-200 shadow-xl focus:border-white/40 focus:bg-white/20 focus:ring-0 focus:outline-none transition-all"},null,512),[[B,D.value]]),t[19]||(t[19]=e("button",{class:"absolute inset-y-0 right-2 flex items-center px-4 text-white hover:text-blue-100 transition-colors"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),t[20]||(t[20]=e("div",{class:"relative w-full md:w-auto"},[e("select",{class:"w-full md:w-64 appearance-none rounded-2xl border border-white/20 bg-white/10 backdrop-blur-md py-4 pl-4 pr-10 text-white shadow-xl focus:border-white/40 focus:bg-white/20 focus:ring-0 focus:outline-none transition-all cursor-pointer"},[e("option",{class:"text-gray-900"},"Laporan Hasil Pengawasan")]),e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-blue-200"},[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])])],-1))]),e("div",Pe,[F(i(be),{href:o.route("files.index"),class:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-md"},{default:K(()=>[...t[21]||(t[21]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t[22]||(t[22]=e("div",null,[e("h2",{class:"text-3xl font-bold text-white tracking-tight"},"Laporan Hasil Pengawasan"),e("p",{class:"text-blue-100 text-sm font-medium opacity-80"},"Manage your laporan hasil pengawasan files.")],-1))])])]),e("div",Ve,[e("div",Fe,[e("div",He,[t[27]||(t[27]=e("h3",{class:"font-bold text-gray-700 flex items-center gap-2 mb-4"},[e("span",{class:"w-1 h-5 bg-red-400 rounded-full"}),m(" Frekuensi Pengawasan Bandara ")],-1)),e("div",De,[F(p,{options:Z.value,series:G.value,height:"100%"},null,8,["options","series"])])]),e("div",Ue,[t[28]||(t[28]=e("h3",{class:"font-bold text-gray-700 flex items-center gap-2 mb-4"},[e("span",{class:"w-1 h-5 bg-blue-400 rounded-full"}),m(" Frekuensi Maskapai ")],-1)),e("div",Te,[F(p,{options:Y.value,series:ee.value,height:"100%"},null,8,["options","series"])])])]),e("div",$e,[t[36]||(t[36]=e("div",{class:"p-4 border-b border-gray-100 flex items-center gap-3"},[e("span",{class:"w-1 h-5 bg-orange-400 rounded-full"}),e("h3",{class:"font-bold text-gray-800 uppercase text-sm tracking-wide"},"Laporan Hasil Pengawasan")],-1)),e("div",Ne,[e("table",Ee,[t[35]||(t[35]=e("thead",{class:"bg-gray-50 text-xs uppercase font-semibold text-gray-500"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Name"),e("th",{class:"px-6 py-4"},"Tanggal Pengawasan"),e("th",{class:"px-6 py-4"},"Lokasi & Maskapai"),e("th",{class:"px-6 py-4"},"Size"),e("th",{class:"px-6 py-4"},"Modified"),e("th",{class:"px-6 py-4 text-right"},"Actions")])],-1)),e("tbody",Ie,[(r(!0),l(_,null,j(O.value,s=>(r(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Oe,[e("div",Re,[e("div",qe,[m(d(ae(s.file_path).substring(0,3))+" ",1),s.is_secure?(r(),l("span",We,[...t[29]||(t[29]=[e("svg",{class:"w-3 h-3 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})],-1)])])):f("",!0)]),e("div",Je,[e("span",null,d(s.name),1),s.is_secure?(r(),l("span",Ke,[...t[30]||(t[30]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),m(" SECURE ",-1)])])):f("",!0)])])]),e("td",Qe,d(s.start_date)+" - "+d(s.end_date),1),e("td",Xe,[e("div",Ze,[(r(!0),l(_,null,j(s.locations,(a,u)=>(r(),l("div",{key:u,class:"text-xs"},[e("div",Ge,d(a.airport),1),e("div",Ye,[(r(!0),l(_,null,j(a.airlines,(C,g)=>(r(),l("span",{key:g,class:"px-2 py-0.5 rounded text-[10px] font-medium bg-blue-50 text-blue-600 border border-blue-100"},d(C),1))),128))])]))),128))])]),e("td",et,d(s.file_size),1),e("td",tt,d(s.modified),1),e("td",ot,[e("div",st,[e("button",{onClick:a=>ue(s),class:"text-green-600 hover:text-green-900 p-1.5 hover:bg-green-50 rounded-full transition-colors",title:"Preview"},[...t[31]||(t[31]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,lt),e("button",{onClick:a=>E(s),class:"text-blue-600 hover:text-blue-900 p-1.5 hover:bg-blue-50 rounded-full transition-colors",title:"Download"},[...t[32]||(t[32]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])],8,rt),o.$page.props.auth.user?(r(),l("button",{key:0,onClick:a=>ie(s),class:"text-red-500 hover:text-red-700 p-1.5 hover:bg-red-50 rounded-full transition-colors",title:"Delete"},[...t[33]||(t[33]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,nt)):f("",!0)])])]))),128)),O.value.length===0?(r(),l("tr",at,[...t[34]||(t[34]=[e("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-400 italic"},"No reports found.",-1)])])):f("",!0)])])])])])]),A.value?(r(),l("div",it,[e("div",dt,[e("div",ut,[t[38]||(t[38]=e("h3",{class:"font-bold text-lg text-gray-800"},"Upload File",-1)),e("button",{onClick:t[2]||(t[2]=s=>{A.value=!1,i(n).reset()}),class:"text-gray-400 hover:text-gray-600 transition-colors"},[...t[37]||(t[37]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ct,[e("form",{onSubmit:H(I,["prevent"]),class:"space-y-5"},[e("div",{onDragover:t[3]||(t[3]=H(s=>U.value=!0,["prevent"])),onDragleave:t[4]||(t[4]=H(s=>U.value=!1,["prevent"])),onDrop:H(te,["prevent"]),class:xe(["border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors relative group",U.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"])},[e("input",{type:"file",onChange:oe,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"fileInput"},null,32),e("div",pt,[t[39]||(t[39]=e("div",{class:"w-12 h-12 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),i(n).file?(r(),l("span",vt,d(i(n).file.name),1)):(r(),l("span",ft,"Click to browse or drag file here")),t[40]||(t[40]=e("span",{class:"text-xs text-gray-400 mt-1"},"Supported files: PDF, DOC, ZIP, APK, Images",-1))])],34),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Nama File",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>i(n).name=s),type:"text",placeholder:"File name",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[B,i(n).name]])]),e("div",bt,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Tanggal Mulai",-1)),b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>i(n).start_date=s),type:"date",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[B,i(n).start_date]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Tanggal Selesai",-1)),b(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>i(n).end_date=s),type:"date",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[B,i(n).end_date]])])]),e("div",xt,[e("div",{class:"flex justify-between items-end border-b border-gray-100 pb-1"},[t[44]||(t[44]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Lokasi Pengawasan",-1)),e("button",{type:"button",onClick:se,class:"text-xs font-bold text-blue-600 hover:underline"},"+ Tambah Lokasi")]),(r(!0),l(_,null,j(i(n).locations,(s,a)=>(r(),l("div",{key:a,class:"bg-gray-50 p-4 rounded-xl border border-gray-200 relative group"},[i(n).locations.length>1?(r(),l("button",{key:0,type:"button",onClick:u=>le(a),class:"absolute top-2 right-2 text-red-400 hover:text-red-600 p-1"},[...t[45]||(t[45]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,gt)):f("",!0),e("div",mt,[e("label",wt,"Lokasi "+d(a+1)+" - Bandara",1),b(e("select",{"onUpdate:modelValue":u=>s.airport_id=u,class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white"},[t[46]||(t[46]=e("option",{value:"",disabled:""},"Select Airport",-1)),(r(!0),l(_,null,j(T.airports,u=>(r(),l("option",{key:u.id,value:u.id},d(u.name),9,yt))),128))],8,ht),[[Q,s.airport_id]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1"},"Maskapai",-1)),e("div",kt,[(r(!0),l(_,null,j(s.airlines,(u,C)=>(r(),l("div",{key:C,class:"flex gap-2"},[b(e("select",{"onUpdate:modelValue":g=>s.airlines[C]=g,class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white"},[t[47]||(t[47]=e("option",{value:"",disabled:""},"Select Airline",-1)),(r(!0),l(_,null,j(T.airlines,g=>(r(),l("option",{key:g.id,value:g.id},d(g.name),9,_t))),128))],8,Ct),[[Q,s.airlines[C]]]),s.airlines.length>1?(r(),l("button",{key:0,type:"button",onClick:g=>ne(a,C),class:"text-red-400 hover:text-red-600 px-1"},[...t[48]||(t[48]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Mt)):f("",!0)]))),128))]),e("button",{type:"button",onClick:u=>re(a),class:"mt-2 text-xs font-bold text-blue-600 hover:underline inline-flex items-center gap-1"},[...t[49]||(t[49]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Tambah Maskapai ",-1)])],8,jt)])]))),128))]),e("div",zt,[e("div",St,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>i(n).is_secure=s),id:"secureCheck",class:"rounded text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ge,i(n).is_secure]]),t[51]||(t[51]=e("label",{for:"secureCheck",class:"text-sm font-bold text-gray-700 flex items-center gap-1"},[e("svg",{class:"w-4 h-4 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),m(" Secure File ")],-1))]),i(n).is_secure?(r(),l("div",Bt,[t[52]||(t[52]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Set Password",-1)),b(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>i(n).password=s),type:"text",placeholder:"Enter password",class:"w-full rounded-lg border-orange-300 focus:ring-orange-500 focus:border-orange-500 bg-orange-50 text-sm",required:""},null,512),[[B,i(n).password]]),t[53]||(t[53]=e("p",{class:"text-[10px] text-gray-500 mt-1"},"Users must enter this password to download or view the file.",-1))])):f("",!0)])],32)]),e("div",Lt,[e("button",{onClick:t[10]||(t[10]=s=>{A.value=!1,i(n).reset()}),class:"flex-1 py-2.5 bg-white border border-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors"},"Cancel"),e("button",{onClick:I,disabled:i(n).processing,class:"flex-1 py-2.5 bg-blue-500/90 hover:bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50"},"Upload",8,At)])])])):f("",!0),z.value?(r(),l("div",Pt,[e("div",Vt,[t[56]||(t[56]=e("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-orange-100 mb-4"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),t[57]||(t[57]=e("h3",{class:"text-lg font-bold mb-2"},"Restricted Access",-1)),e("p",Ft,[t[54]||(t[54]=m("Enter the password to unlock ",-1)),e("strong",null,d(x.value?.name),1),t[55]||(t[55]=m(".",-1))]),e("form",{onSubmit:H(de,["prevent"])},[b(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>w.value=s),type:"password",placeholder:"File Password",class:"w-full rounded-lg border-gray-300 mb-4 text-center tracking-widest",autoFocus:"",required:""},null,512),[[B,w.value]]),e("div",Ht,[e("button",{type:"button",onClick:t[12]||(t[12]=s=>{z.value=!1,x.value=null}),class:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm"},"Cancel"),e("button",Dt,d(P.value==="preview"?"Unlock & Preview":"Unlock & Download"),1)])],32)])])):f("",!0),$.value?(r(),l("div",Ut,[e("div",Tt,[e("div",$t,[e("h3",Nt,d(h.value?.name),1),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:W,class:"text-gray-400 hover:text-white transition-colors bg-white/10 hover:bg-white/20 rounded-full p-1.5"},[...t[58]||(t[58]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Et,[y.value==="image"?(r(),l("div",It,[e("img",{src:h.value.file_path,style:me({transform:`scale(${v.value})`}),class:"max-w-full max-h-full object-contain transition-transform duration-200 ease-out origin-center"},null,12,Ot),e("div",Rt,[e("button",{onClick:pe,class:"hover:text-blue-400 p-1 disabled:opacity-50",disabled:v.value<=.5},[...t[59]||(t[59]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,qt),e("span",Wt,d(Math.round(v.value*100))+"%",1),e("button",{onClick:ce,class:"hover:text-blue-400 p-1 disabled:opacity-50",disabled:v.value>=3},[...t[60]||(t[60]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,Jt),e("button",{onClick:t[13]||(t[13]=s=>v.value=1),class:"ml-2 text-xs text-gray-400 hover:text-white border-l border-gray-600 pl-3"},"Reset")])])):y.value==="pdf"?(r(),l("iframe",{key:1,src:h.value.file_path,class:"w-full h-full bg-white"},null,8,Kt)):y.value==="word"?(r(),l("div",Qt,[S.value?(r(),l("div",Xt,[...t[61]||(t[61]=[e("svg",{class:"animate-spin h-10 w-10 text-blue-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-gray-500 font-medium"},"Loading document...",-1)])])):k.value?(r(),l("div",Zt,d(k.value),1)):f("",!0),b(e("div",{ref_key:"docxContainer",ref:V,class:"bg-white shadow-lg p-8 min-h-[800px] w-full max-w-4xl"},null,512),[[X,!S.value&&!k.value]])])):y.value==="excel"?(r(),l("div",Gt,[S.value?(r(),l("div",Yt,[...t[62]||(t[62]=[e("svg",{class:"animate-spin h-10 w-10 text-green-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-gray-500 font-medium"},"Loading spreadsheet...",-1)])])):k.value?(r(),l("div",eo,d(k.value),1)):f("",!0),b(e("div",{ref_key:"excelContainer",ref:N,class:"excel-preview-container prose max-w-none"},null,512),[[X,!S.value&&!k.value]])])):y.value==="ppt"?(r(),l("div",to,[t[64]||(t[64]=e("div",{class:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-10 h-10 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})])],-1)),t[65]||(t[65]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Preview Not Available Locally",-1)),t[66]||(t[66]=e("p",{class:"text-gray-500 mb-6 max-w-sm"}," PowerPoint previews require a public server. Please download the file to view it. ",-1)),e("button",{onClick:t[14]||(t[14]=s=>E(h.value)),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2"},[...t[63]||(t[63]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),m(" Download Presentation ",-1)])])])):(r(),l("div",oo,[t[67]||(t[67]=e("div",{class:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[68]||(t[68]=e("h3",{class:"text-xl font-bold text-white mb-2"},"Preview Unavailable",-1)),t[69]||(t[69]=e("p",{class:"text-gray-400 mb-6"},"This file type cannot be previewed directly.",-1)),e("button",{onClick:t[15]||(t[15]=s=>{E(h.value),W()}),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"},"Download File")]))])])])):f("",!0)]),_:1})],64)}}};export{ao as default};
