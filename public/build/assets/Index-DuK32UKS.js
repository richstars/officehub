import{u as G,I as we,g as l,a as D,d as u,h as he,w as ee,b as e,i as v,m as p,f as w,j as f,p as S,o as r,F as b,q as h,k as _,t as c,s as E,l as ye,e as T,n as ke,v as Ce,x as _e,y as te,J as Me,A as je}from"./app-KfVuKNpr.js";import{A as Ae}from"./AuthenticatedLayout-7ir8R4Jl.js";import{r as ze,a as Be,u as Ve}from"./xlsx-DwEGnY8w.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Se={class:"min-h-screen bg-gray-50 pb-20"},Le={class:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-blue-800 to-sky-500 bg-[length:300%_300%] animate-gradient-flow px-6 py-10 shadow-lg border-b border-white/10 pb-24"},Fe={class:"max-w-7xl mx-auto relative z-10"},Pe={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8"},Ue={class:"flex gap-3"},He={class:"flex flex-col md:flex-row gap-3"},De={class:"relative flex-1 max-w-2xl"},Ee={class:"relative w-full md:w-32"},Te=["value"],$e={class:"mt-8 flex items-center gap-4 animate-fade-in-up"},Ne={class:"max-w-7xl mx-auto px-6 -mt-16 relative z-20 space-y-6"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Oe={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},Re={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},Ye={class:"relative w-full sm:w-40"},qe=["value"],We={class:"h-64"},Je={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},Ke={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},Qe={class:"relative w-full sm:w-40"},Xe=["value"],Ze={class:"h-64"},Ge={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},et={class:"overflow-x-auto"},tt={class:"w-full text-left text-sm text-gray-600"},ot={class:"divide-y divide-gray-50"},st={class:"px-6 py-4 font-medium text-gray-900"},lt={class:"flex items-center gap-3"},rt={class:"flex-shrink-0 h-8 w-8 rounded bg-gray-100 flex items-center justify-center text-gray-500 font-bold text-xs uppercase relative"},nt={key:0,class:"absolute -top-1 -right-1 bg-white rounded-full p-0.5 shadow-sm"},at={class:"flex flex-col"},it=["title"],dt={key:0,class:"text-[10px] text-orange-500 font-bold flex items-center gap-1"},ut={class:"px-6 py-4 text-xs font-mono"},ct={class:"px-6 py-4"},pt={class:"flex flex-col gap-4"},ft={class:"font-bold text-gray-700 mb-1.5"},vt={class:"flex flex-wrap gap-1.5"},xt={class:"px-6 py-4 text-xs"},bt={class:"px-6 py-4 text-xs"},gt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},mt={class:"flex justify-end gap-2 items-center"},wt=["onClick"],ht=["onClick"],yt=["onClick"],kt={key:0},Ct={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm"},_t={class:"bg-white rounded-2xl shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]"},Mt={class:"p-5 border-b border-gray-100 flex justify-between items-center"},jt={class:"p-6 overflow-y-auto custom-scrollbar"},At={key:0,class:"flex flex-col items-center justify-center p-4"},zt={key:0,class:"text-xs text-gray-500 font-mono mt-1"},Bt={key:1},Vt={class:"flex flex-col items-center pointer-events-none"},St={key:0,class:"text-sm font-medium text-gray-600"},Lt={key:1,class:"text-sm font-bold text-blue-600 truncate max-w-[200px]"},Ft={class:"grid grid-cols-2 gap-4"},Pt={class:"space-y-4"},Ut=["onClick"],Ht={class:"mb-3"},Dt={class:"block text-[10px] font-bold text-gray-500 uppercase mb-1"},Et=["onUpdate:modelValue"],Tt=["value"],$t={class:"space-y-2"},Nt=["onUpdate:modelValue"],It=["value"],Ot=["onClick"],Rt=["onClick"],Yt={class:"pt-2 border-t mt-2"},qt={class:"flex items-center gap-2 mb-2"},Wt={key:0},Jt={class:"p-5 border-t border-gray-100 flex gap-3"},Kt=["disabled"],Qt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},Xt={class:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6 text-center"},Zt={class:"text-sm text-gray-500 mb-4"},Gt={class:"flex gap-2"},eo={type:"submit",class:"flex-1 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-sm font-bold"},to={key:2,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-fade-in"},oo={class:"bg-gray-900 rounded-xl shadow-2xl w-full max-w-6xl h-[85vh] flex flex-col overflow-hidden relative"},so={class:"flex items-center justify-between px-4 py-3 bg-white/5 border-b border-white/10"},lo={class:"text-white font-medium truncate max-w-md"},ro={class:"flex-1 bg-black/50 flex items-center justify-center relative overflow-hidden"},no={key:0,class:"w-full h-full overflow-auto flex items-center justify-center p-4"},ao=["src"],io={class:"absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-4 bg-gray-800/80 backdrop-blur-md px-4 py-2 rounded-full text-white shadow-xl border border-white/10 z-20"},uo=["disabled"],co={class:"font-mono text-sm min-w-[3ch] text-center"},po=["disabled"],fo=["src"],vo={key:2,class:"w-full h-full bg-gray-100 overflow-auto p-8 flex justify-center"},xo={key:0,class:"flex flex-col items-center justify-center p-10"},bo={key:1,class:"text-red-500 p-4 text-center bg-red-50 rounded-lg border border-red-200"},go={key:3,class:"w-full h-full bg-white overflow-auto p-4"},mo={key:0,class:"flex flex-col items-center justify-center p-10"},wo={key:1,class:"text-red-500 p-4 text-center bg-red-50 rounded-lg border border-red-200"},ho={key:4,class:"w-full h-full flex flex-col items-center justify-center p-10 text-center bg-gray-50"},yo={key:5,class:"text-center p-10"},jo={__name:"Index",props:{reports:Array,airportStats:Array,airlineStats:Array,airports:Array,airlines:Array},setup(L){const F=L,$=p(""),M=p("All"),j=p("All"),N=p("All"),P=p(!1),I=p(!1),B=p(!1),y=p(""),g=p(null),U=p("download"),R=p(!1),k=p(null),x=p(1),H=p(null),Y=p(null),V=p(!1),A=p(null),a=G({name:"",start_date:"",end_date:"",file:null,is_secure:!1,password:"",locations:[{airport_id:"",airlines:[""]}]}),J=_(()=>{const s={};O.value.forEach(n=>{n.locations.forEach(o=>{(j.value==="All"||o.airlines.some(d=>d.id===j.value))&&(s[o.airport]||(s[o.airport]=0),s[o.airport]++)})});let t=Object.entries(s).map(([n,o])=>({name:n,count:o}));if(M.value!=="All"){const n=F.airports.find(o=>o.id===M.value);n?t=t.filter(o=>o.name===n.name):t=[]}return t.sort((n,o)=>o.count-n.count)}),q=_(()=>{const s={};O.value.forEach(n=>{n.locations.forEach(o=>{(M.value==="All"||o.airport_id===M.value)&&o.airlines.forEach(d=>{s[d.name]||(s[d.name]=0),s[d.name]++})})});let t=Object.entries(s).map(([n,o])=>{const i=F.airlines.find(d=>d.name===n);return{name:n,count:o,color:i?.color||"#3b82f6"}});if(j.value!=="All"){const n=F.airlines.find(o=>o.id===j.value);n?t=t.filter(o=>o.name===n.name):t=[]}return t.sort((n,o)=>o.count-n.count)}),oe=_(()=>({chart:{type:"bar",toolbar:{show:!1},fontFamily:"Inter, sans-serif"},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%"}},dataLabels:{enabled:!1},xaxis:{categories:J.value.map(s=>s.name),labels:{style:{colors:"#64748b"},formatter:s=>Math.floor(s)},forceNiceScale:!0,tickAmount:5},yaxis:{labels:{style:{colors:"#64748b",fontSize:"11px"}}},colors:["#3b82f6"],grid:{borderColor:"#f1f5f9",strokeDashArray:4},tooltip:{theme:"light",y:{formatter:s=>Math.floor(s)}}})),se=_(()=>[{name:"Frekuensi",data:J.value.map(s=>s.count)}]),le=_(()=>({chart:{type:"bar",toolbar:{show:!1},fontFamily:"Inter, sans-serif"},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"70%",distributed:!0}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},offsetX:0},xaxis:{categories:q.value.map(s=>s.name),labels:{style:{colors:"#64748b"},formatter:s=>Math.floor(s)}},yaxis:{labels:{show:!0,style:{colors:"#64748b",fontSize:"11px",fontWeight:700},maxWidth:200}},colors:q.value.map(s=>s.color||"#3b82f6"),legend:{show:!1},grid:{borderColor:"#f1f5f9",strokeDashArray:4},tooltip:{theme:"light",y:{formatter:s=>Math.floor(s)}}})),re=_(()=>[{name:"Frekuensi",data:q.value.map(s=>({x:s.name,y:s.count}))}]),ne=s=>{I.value=!1;const t=s.dataTransfer.files;t.length>0&&(a.file=t[0],a.name||(a.name=t[0].name.split(".").slice(0,-1).join(".")))},ae=s=>{const t=s.target.files;t.length>0&&(a.file=t[0],a.name||(a.name=t[0].name.split(".").slice(0,-1).join(".")))},ie=()=>{a.locations.push({airport_id:"",airlines:[""]})},de=s=>{a.locations.splice(s,1)},ue=s=>{a.locations[s].airlines.push("")},ce=(s,t)=>{a.locations[s].airlines.splice(t,1)},K=()=>{a.post(route("supervision-reports.store"),{onSuccess:()=>{P.value=!1,a.reset()}})},O=_(()=>{let s=F.reports;if($.value){const t=$.value.toLowerCase();s=s.filter(n=>n.name.toLowerCase().includes(t))}return M.value!=="All"&&(s=s.filter(t=>t.locations.some(n=>n.airport_id===M.value))),j.value!=="All"&&(s=s.filter(t=>t.locations.some(n=>n.airlines.some(o=>o.id===j.value)))),N.value!=="All"&&(s=s.filter(t=>t.start_date.startsWith(N.value))),s}),pe=_(()=>{const s=new Set;F.reports.forEach(o=>{const i=parseInt(o.start_date.substring(0,4));isNaN(i)||s.add(i)});const t=2025,n=new Date().getFullYear();for(let o=t;o<=n;o++)s.add(o);return Array.from(s).sort().reverse()}),fe=s=>{if(!s)return"default";const t=s.split(".").pop().toLowerCase();return["pdf"].includes(t)?"pdf":["doc","docx"].includes(t)?"word":["xls","xlsx","csv"].includes(t)?"excel":["ppt","pptx"].includes(t)?"ppt":["jpg","jpeg","png","gif","webp"].includes(t)?"image":["zip","rar"].includes(t)?"zip":"default"},ve=s=>{confirm("Are you sure you want to delete this report?")&&G({}).delete(route("supervision-reports.destroy",s.id))},W=s=>{s.is_secure?(g.value=s,y.value="",U.value="download",B.value=!0):Q(route("supervision-reports.download",s.id),{})},xe=async()=>{if(g.value){if(U.value==="download")Q(route("supervision-reports.download",g.value.id),{password:y.value}),B.value=!1,y.value="",g.value=null;else if(U.value==="preview")try{await Me.post(route("supervision-reports.verify-password",g.value.id),{password:y.value});const s=g.value;B.value=!1,y.value="",g.value=null,X(s)}catch{alert("Incorrect password."),y.value=""}}},Q=(s,t)=>{const n=document.createElement("form");n.method="POST",n.action=s;const o=document.querySelector('meta[name="csrf-token"]');if(o){const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=o.getAttribute("content"),n.appendChild(i)}for(const i in t){const d=document.createElement("input");d.type="hidden",d.name=i,d.value=t[i],n.appendChild(d)}document.body.appendChild(n),n.submit(),document.body.removeChild(n)},C=_(()=>{if(!k.value)return null;const t=k.value.file_path.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(t)?"image":["pdf"].includes(t)?"pdf":["doc","docx"].includes(t)?"word":["xls","xlsx","csv"].includes(t)?"excel":["ppt","pptx"].includes(t)?"ppt":"other"}),be=s=>{s.is_secure?(g.value=s,y.value="",U.value="preview",B.value=!0):X(s)},X=async s=>{if(k.value=s,x.value=1,R.value=!0,A.value=null,C.value==="word"||C.value==="excel"){V.value=!0;try{const t=await fetch(s.file_path);if(!t.ok)throw new Error("Failed to load file");const n=await t.blob();if(await je(),C.value==="word")H.value&&(H.value.innerHTML="",await ze(n,H.value,H.value,{className:"docx-preview",inWrapper:!0}));else if(C.value==="excel"&&Y.value){const o=await n.arrayBuffer(),i=Be(o),d=i.SheetNames[0],z=i.Sheets[d],m=Ve.sheet_to_html(z,{id:"excel-table",editable:!1});Y.value.innerHTML=m}}catch(t){console.error("Error rendering office file:",t),A.value="Failed to render preview."}finally{V.value=!1}}},Z=()=>{R.value=!1,k.value=null,x.value=1},ge=()=>{x.value<3&&(x.value+=.25)},me=()=>{x.value>.5&&(x.value-=.25)};return(s,t)=>{const n=we("apexchart");return r(),l(b,null,[D(u(he),{title:"Laporan Hasil Pengawasan"}),D(Ae,null,{default:ee(()=>[e("div",Se,[e("div",Le,[t[27]||(t[27]=e("div",{class:"absolute inset-0 bg-[radial-gradient(rgba(255,255,255,0.15)_1px,transparent_1px)] [background-size:20px_20px]"},null,-1)),t[28]||(t[28]=e("div",{class:"absolute inset-0 bg-white/5 backdrop-blur-[1px]"},null,-1)),t[29]||(t[29]=e("div",{class:"absolute -top-20 -right-20 h-80 w-80 rounded-full bg-sky-400/20 blur-3xl mix-blend-overlay"},null,-1)),t[30]||(t[30]=e("div",{class:"absolute -bottom-20 -left-20 h-80 w-80 rounded-full bg-blue-900/40 blur-3xl"},null,-1)),e("div",Fe,[e("div",Pe,[t[20]||(t[20]=e("div",null,[e("h1",{class:"text-4xl font-extrabold text-white tracking-tight drop-shadow-md"},"Page File"),e("p",{class:"text-blue-100 text-sm mt-1 font-medium opacity-90"},"Manage and organize your documents.")],-1)),e("div",Ue,[e("button",{onClick:t[0]||(t[0]=o=>P.value=!0),class:"bg-white text-blue-900 hover:bg-blue-50 px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-md hover:shadow-lg flex items-center gap-2"},[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),w(" Upload File ",-1)])])])]),e("div",He,[e("div",De,[t[21]||(t[21]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-blue-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>$.value=o),type:"text",placeholder:"Search files...",class:"block w-full rounded-2xl border border-white/20 bg-white/10 backdrop-blur-md py-4 pl-12 pr-12 text-white placeholder-blue-200 shadow-xl focus:border-white/40 focus:bg-white/20 focus:ring-0 focus:outline-none transition-all"},null,512),[[S,$.value]]),t[22]||(t[22]=e("button",{class:"absolute inset-y-0 right-2 flex items-center px-4 text-white hover:text-blue-100 transition-colors"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),e("div",Ee,[f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>N.value=o),class:"w-full appearance-none rounded-2xl border border-white/20 bg-white/10 backdrop-blur-md py-4 pl-4 pr-10 text-white shadow-xl focus:border-white/40 focus:bg-white/20 focus:ring-0 focus:outline-none transition-all cursor-pointer"},[t[23]||(t[23]=e("option",{class:"text-gray-900",value:"All"},"All Years",-1)),(r(!0),l(b,null,h(pe.value,o=>(r(),l("option",{key:o,value:o,class:"text-gray-900"},c(o),9,Te))),128))],512),[[E,N.value]]),t[24]||(t[24]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-blue-200"},[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",$e,[D(u(ye),{href:s.route("files.index"),class:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-md"},{default:ee(()=>[...t[25]||(t[25]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t[26]||(t[26]=e("div",null,[e("h2",{class:"text-3xl font-bold text-white tracking-tight"},"Laporan Hasil Pengawasan"),e("p",{class:"text-blue-100 text-sm font-medium opacity-80"},"Manage your laporan hasil pengawasan files.")],-1))])])]),e("div",Ne,[e("div",Ie,[e("div",Oe,[e("div",Re,[t[33]||(t[33]=e("h3",{class:"font-bold text-gray-700 flex items-center gap-2"},[e("span",{class:"w-1 h-5 bg-red-400 rounded-full"}),w(" Frekuensi Pengawasan Bandara ")],-1)),e("div",Ye,[f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>M.value=o),class:"w-full appearance-none rounded-lg border border-gray-200 bg-gray-50 py-1.5 pl-3 pr-8 text-xs font-medium text-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none cursor-pointer"},[t[31]||(t[31]=e("option",{value:"All"},"All Airports",-1)),(r(!0),l(b,null,h(L.airports,o=>(r(),l("option",{key:o.id,value:o.id},c(o.name),9,qe))),128))],512),[[E,M.value]]),t[32]||(t[32]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500"},[e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",We,[D(n,{options:oe.value,series:se.value,height:"100%"},null,8,["options","series"])])]),e("div",Je,[e("div",Ke,[t[36]||(t[36]=e("h3",{class:"font-bold text-gray-700 flex items-center gap-2"},[e("span",{class:"w-1 h-5 bg-blue-400 rounded-full"}),w(" Frekuensi Maskapai ")],-1)),e("div",Qe,[f(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>j.value=o),class:"w-full appearance-none rounded-lg border border-gray-200 bg-gray-50 py-1.5 pl-3 pr-8 text-xs font-medium text-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none cursor-pointer"},[t[34]||(t[34]=e("option",{value:"All"},"All Airlines",-1)),(r(!0),l(b,null,h(L.airlines,o=>(r(),l("option",{key:o.id,value:o.id},c(o.name),9,Xe))),128))],512),[[E,j.value]]),t[35]||(t[35]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500"},[e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",Ze,[D(n,{options:le.value,series:re.value,height:"100%"},null,8,["options","series"])])])]),e("div",Ge,[t[44]||(t[44]=e("div",{class:"p-4 border-b border-gray-100 flex items-center gap-3"},[e("span",{class:"w-1 h-5 bg-orange-400 rounded-full"}),e("h3",{class:"font-bold text-gray-800 uppercase text-sm tracking-wide"},"Laporan Hasil Pengawasan")],-1)),e("div",et,[e("table",tt,[t[43]||(t[43]=e("thead",{class:"bg-gray-50 text-xs uppercase font-semibold text-gray-500"},[e("tr",null,[e("th",{class:"px-6 py-4 w-[150px]"},"Name"),e("th",{class:"px-6 py-4 w-[140px]"},"Tanggal Pengawasan"),e("th",{class:"px-6 py-4 w-auto"},"Lokasi & Maskapai"),e("th",{class:"px-6 py-4 w-[100px]"},"Size"),e("th",{class:"px-6 py-4 w-[140px]"},"Modified"),e("th",{class:"px-6 py-4 text-right w-[100px]"},"Actions")])],-1)),e("tbody",ot,[(r(!0),l(b,null,h(O.value,o=>(r(),l("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors"},[e("td",st,[e("div",lt,[e("div",rt,[w(c(fe(o.file_path).substring(0,3))+" ",1),o.is_secure?(r(),l("span",nt,[...t[37]||(t[37]=[e("svg",{class:"w-3 h-3 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})],-1)])])):v("",!0)]),e("div",at,[e("span",{class:"truncate max-w-[100px] block",title:o.name},c(o.name),9,it),o.is_secure?(r(),l("span",dt,[...t[38]||(t[38]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),w(" SECURE ",-1)])])):v("",!0)])])]),e("td",ut,c(o.start_date)+" - "+c(o.end_date),1),e("td",ct,[e("div",pt,[(r(!0),l(b,null,h(o.locations,(i,d)=>(r(),l("div",{key:d,class:"text-xs"},[e("div",ft,c(i.airport),1),e("div",vt,[(r(!0),l(b,null,h(i.airlines,(z,m)=>(r(),l("span",{key:m,class:"px-2 py-0.5 rounded text-[10px] font-medium bg-blue-50 text-blue-600 border border-blue-100"},c(z.name),1))),128))])]))),128))])]),e("td",xt,c(o.file_size),1),e("td",bt,c(o.modified),1),e("td",gt,[e("div",mt,[e("button",{onClick:i=>be(o),class:"text-green-600 hover:text-green-900 p-1.5 hover:bg-green-50 rounded-full transition-colors",title:"Preview"},[...t[39]||(t[39]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,wt),e("button",{onClick:i=>W(o),class:"text-blue-600 hover:text-blue-900 p-1.5 hover:bg-blue-50 rounded-full transition-colors",title:"Download"},[...t[40]||(t[40]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])],8,ht),s.$page.props.auth.user?(r(),l("button",{key:0,onClick:i=>ve(o),class:"text-red-500 hover:text-red-700 p-1.5 hover:bg-red-50 rounded-full transition-colors",title:"Delete"},[...t[41]||(t[41]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,yt)):v("",!0)])])]))),128)),O.value.length===0?(r(),l("tr",kt,[...t[42]||(t[42]=[e("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-400 italic"},"No reports found.",-1)])])):v("",!0)])])])])])]),P.value?(r(),l("div",Ct,[e("div",_t,[e("div",Mt,[t[46]||(t[46]=e("h3",{class:"font-bold text-lg text-gray-800"},"Upload File",-1)),e("button",{onClick:t[5]||(t[5]=o=>{P.value=!1,u(a).reset()}),class:"text-gray-400 hover:text-gray-600 transition-colors"},[...t[45]||(t[45]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",jt,[e("form",{onSubmit:T(K,["prevent"]),class:"space-y-5"},[e("div",{onDragover:t[6]||(t[6]=T(o=>I.value=!0,["prevent"])),onDragleave:t[7]||(t[7]=T(o=>I.value=!1,["prevent"])),onDrop:T(ne,["prevent"]),class:ke(["border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors relative group",I.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"])},[u(a).processing?(r(),l("div",At,[t[47]||(t[47]=e("svg",{class:"animate-spin h-10 w-10 text-blue-600 mb-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t[48]||(t[48]=e("span",{class:"text-sm font-bold text-gray-700"},"Uploading Report...",-1)),u(a).progress?(r(),l("span",zt,c(u(a).progress.percentage)+"%",1)):v("",!0)])):(r(),l("div",Bt,[e("input",{type:"file",onChange:ae,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"fileInput"},null,32),e("div",Vt,[t[49]||(t[49]=e("div",{class:"w-12 h-12 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),u(a).file?(r(),l("span",Lt,c(u(a).file.name),1)):(r(),l("span",St,"Click to browse or drag file here")),t[50]||(t[50]=e("span",{class:"text-xs text-gray-400 mt-1"},"Supported files: PDF, DOC, ZIP, APK, Images",-1))])]))],34),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Nama File",-1)),f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>u(a).name=o),type:"text",placeholder:"File name",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[S,u(a).name]])]),e("div",Ft,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Tanggal Mulai",-1)),f(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>u(a).start_date=o),type:"date",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[S,u(a).start_date]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Tanggal Selesai",-1)),f(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>u(a).end_date=o),type:"date",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[S,u(a).end_date]])])]),e("div",Pt,[e("div",{class:"flex justify-between items-end border-b border-gray-100 pb-1"},[t[54]||(t[54]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Lokasi Pengawasan",-1)),e("button",{type:"button",onClick:ie,class:"text-xs font-bold text-blue-600 hover:underline"},"+ Tambah Lokasi")]),(r(!0),l(b,null,h(u(a).locations,(o,i)=>(r(),l("div",{key:i,class:"bg-gray-50 p-4 rounded-xl border border-gray-200 relative group"},[u(a).locations.length>1?(r(),l("button",{key:0,type:"button",onClick:d=>de(i),class:"absolute top-2 right-2 text-red-400 hover:text-red-600 p-1"},[...t[55]||(t[55]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ut)):v("",!0),e("div",Ht,[e("label",Dt,"Lokasi "+c(i+1)+" - Bandara",1),f(e("select",{"onUpdate:modelValue":d=>o.airport_id=d,class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white"},[t[56]||(t[56]=e("option",{value:"",disabled:""},"Select Airport",-1)),(r(!0),l(b,null,h(L.airports,d=>(r(),l("option",{key:d.id,value:d.id},c(d.name),9,Tt))),128))],8,Et),[[E,o.airport_id]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1"},"Maskapai",-1)),e("div",$t,[(r(!0),l(b,null,h(o.airlines,(d,z)=>(r(),l("div",{key:z,class:"flex gap-2"},[f(e("select",{"onUpdate:modelValue":m=>o.airlines[z]=m,class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white"},[t[57]||(t[57]=e("option",{value:"",disabled:""},"Select Airline",-1)),(r(!0),l(b,null,h(L.airlines,m=>(r(),l("option",{key:m.id,value:m.id},c(m.name),9,It))),128))],8,Nt),[[E,o.airlines[z]]]),o.airlines.length>1?(r(),l("button",{key:0,type:"button",onClick:m=>ce(i,z),class:"text-red-400 hover:text-red-600 px-1"},[...t[58]||(t[58]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ot)):v("",!0)]))),128))]),e("button",{type:"button",onClick:d=>ue(i),class:"mt-2 text-xs font-bold text-blue-600 hover:underline inline-flex items-center gap-1"},[...t[59]||(t[59]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),w(" Tambah Maskapai ",-1)])],8,Rt)])]))),128))]),e("div",Yt,[e("div",qt,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=o=>u(a).is_secure=o),id:"secureCheck",class:"rounded text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[Ce,u(a).is_secure]]),t[61]||(t[61]=e("label",{for:"secureCheck",class:"text-sm font-bold text-gray-700 flex items-center gap-1"},[e("svg",{class:"w-4 h-4 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),w(" Secure File ")],-1))]),u(a).is_secure?(r(),l("div",Wt,[t[62]||(t[62]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Set Password",-1)),f(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>u(a).password=o),type:"text",placeholder:"Enter password",class:"w-full rounded-lg border-orange-300 focus:ring-orange-500 focus:border-orange-500 bg-orange-50 text-sm",required:""},null,512),[[S,u(a).password]]),t[63]||(t[63]=e("p",{class:"text-[10px] text-gray-500 mt-1"},"Users must enter this password to download or view the file.",-1))])):v("",!0)])],32)]),e("div",Jt,[e("button",{onClick:t[13]||(t[13]=o=>{P.value=!1,u(a).reset()}),class:"flex-1 py-2.5 bg-white border border-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors"},"Cancel"),e("button",{onClick:K,disabled:u(a).processing,class:"flex-1 py-2.5 bg-blue-500/90 hover:bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50"},"Upload",8,Kt)])])])):v("",!0),B.value?(r(),l("div",Qt,[e("div",Xt,[t[66]||(t[66]=e("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-orange-100 mb-4"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),t[67]||(t[67]=e("h3",{class:"text-lg font-bold mb-2"},"Restricted Access",-1)),e("p",Zt,[t[64]||(t[64]=w("Enter the password to unlock ",-1)),e("strong",null,c(g.value?.name),1),t[65]||(t[65]=w(".",-1))]),e("form",{onSubmit:T(xe,["prevent"])},[f(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>y.value=o),type:"password",placeholder:"File Password",class:"w-full rounded-lg border-gray-300 mb-4 text-center tracking-widest",autoFocus:"",required:""},null,512),[[S,y.value]]),e("div",Gt,[e("button",{type:"button",onClick:t[15]||(t[15]=o=>{B.value=!1,g.value=null}),class:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm"},"Cancel"),e("button",eo,c(U.value==="preview"?"Unlock & Preview":"Unlock & Download"),1)])],32)])])):v("",!0),R.value?(r(),l("div",to,[e("div",oo,[e("div",so,[e("h3",lo,c(k.value?.name),1),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:Z,class:"text-gray-400 hover:text-white transition-colors bg-white/10 hover:bg-white/20 rounded-full p-1.5"},[...t[68]||(t[68]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",ro,[C.value==="image"?(r(),l("div",no,[e("img",{src:k.value.file_path,style:_e({transform:`scale(${x.value})`}),class:"max-w-full max-h-full object-contain transition-transform duration-200 ease-out origin-center"},null,12,ao),e("div",io,[e("button",{onClick:me,class:"hover:text-blue-400 p-1 disabled:opacity-50",disabled:x.value<=.5},[...t[69]||(t[69]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,uo),e("span",co,c(Math.round(x.value*100))+"%",1),e("button",{onClick:ge,class:"hover:text-blue-400 p-1 disabled:opacity-50",disabled:x.value>=3},[...t[70]||(t[70]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,po),e("button",{onClick:t[16]||(t[16]=o=>x.value=1),class:"ml-2 text-xs text-gray-400 hover:text-white border-l border-gray-600 pl-3"},"Reset")])])):C.value==="pdf"?(r(),l("iframe",{key:1,src:k.value.file_path,class:"w-full h-full bg-white"},null,8,fo)):C.value==="word"?(r(),l("div",vo,[V.value?(r(),l("div",xo,[...t[71]||(t[71]=[e("svg",{class:"animate-spin h-10 w-10 text-blue-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-gray-500 font-medium"},"Loading document...",-1)])])):A.value?(r(),l("div",bo,c(A.value),1)):v("",!0),f(e("div",{ref_key:"docxContainer",ref:H,class:"bg-white shadow-lg p-8 min-h-[800px] w-full max-w-4xl"},null,512),[[te,!V.value&&!A.value]])])):C.value==="excel"?(r(),l("div",go,[V.value?(r(),l("div",mo,[...t[72]||(t[72]=[e("svg",{class:"animate-spin h-10 w-10 text-green-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-gray-500 font-medium"},"Loading spreadsheet...",-1)])])):A.value?(r(),l("div",wo,c(A.value),1)):v("",!0),f(e("div",{ref_key:"excelContainer",ref:Y,class:"excel-preview-container prose max-w-none"},null,512),[[te,!V.value&&!A.value]])])):C.value==="ppt"?(r(),l("div",ho,[t[74]||(t[74]=e("div",{class:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-10 h-10 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})])],-1)),t[75]||(t[75]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Preview Not Available Locally",-1)),t[76]||(t[76]=e("p",{class:"text-gray-500 mb-6 max-w-sm"}," PowerPoint previews require a public server. Please download the file to view it. ",-1)),e("button",{onClick:t[17]||(t[17]=o=>W(k.value)),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2"},[...t[73]||(t[73]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),w(" Download Presentation ",-1)])])])):(r(),l("div",yo,[t[77]||(t[77]=e("div",{class:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[78]||(t[78]=e("h3",{class:"text-xl font-bold text-white mb-2"},"Preview Unavailable",-1)),t[79]||(t[79]=e("p",{class:"text-gray-400 mb-6"},"This file type cannot be previewed directly.",-1)),e("button",{onClick:t[18]||(t[18]=o=>{W(k.value),Z()}),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"},"Download File")]))])])])):v("",!0)]),_:1})],64)}}};export{jo as default};
