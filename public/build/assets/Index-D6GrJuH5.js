import{u as G,I as me,g as l,a as U,d as u,h as ge,w as Y,b as e,i as v,m as p,f as g,j as f,p as V,l as we,o as r,F as w,q as C,t as c,s as O,k as z,e as D,n as he,v as ye,x as ke,y as ee,J as Ce,A as _e}from"./app-UGNlNysB.js";import{A as Me}from"./AuthenticatedLayout-ISo8a6At.js";import{r as je,a as Ae,u as ze}from"./xlsx-4brvrNw8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Be={class:"min-h-screen bg-gray-50 pb-20"},Se={class:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-blue-800 to-sky-500 bg-[length:300%_300%] animate-gradient-flow px-6 py-10 shadow-lg border-b border-white/10 pb-24"},Ve={class:"max-w-7xl mx-auto relative z-10"},Le={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8"},Pe={class:"flex gap-3"},Fe={class:"flex flex-col md:flex-row gap-3"},He={class:"relative flex-1 max-w-2xl"},Ue={class:"mt-8 flex items-center gap-4 animate-fade-in-up"},De={class:"max-w-7xl mx-auto px-6 -mt-16 relative z-20 space-y-6"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$e={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},Ee={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},Ne={class:"relative w-full sm:w-40"},Oe=["value"],Ie={class:"h-64"},Re={class:"bg-white p-5 rounded-xl shadow-sm border border-gray-100"},qe={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2"},We={class:"relative w-full sm:w-40"},Je=["value"],Ke={class:"h-64"},Qe={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},Xe={class:"overflow-x-auto"},Ze={class:"w-full text-left text-sm text-gray-600"},Ge={class:"divide-y divide-gray-50"},Ye={class:"px-6 py-4 font-medium text-gray-900"},et={class:"flex items-center gap-3"},tt={class:"flex-shrink-0 h-8 w-8 rounded bg-gray-100 flex items-center justify-center text-gray-500 font-bold text-xs uppercase relative"},ot={key:0,class:"absolute -top-1 -right-1 bg-white rounded-full p-0.5 shadow-sm"},st={class:"flex flex-col"},lt={key:0,class:"text-[10px] text-orange-500 font-bold flex items-center gap-1"},rt={class:"px-6 py-4 text-xs font-mono"},nt={class:"px-6 py-4"},at={class:"flex flex-col gap-4"},it={class:"font-bold text-gray-700 mb-1.5"},dt={class:"flex flex-wrap gap-1.5"},ut={class:"px-6 py-4 text-xs"},ct={class:"px-6 py-4 text-xs"},pt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ft={class:"flex justify-end gap-2 items-center"},vt=["onClick"],bt=["onClick"],xt=["onClick"],mt={key:0},gt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm"},wt={class:"bg-white rounded-2xl shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]"},ht={class:"p-5 border-b border-gray-100 flex justify-between items-center"},yt={class:"p-6 overflow-y-auto custom-scrollbar"},kt={class:"flex flex-col items-center pointer-events-none"},Ct={key:0,class:"text-sm font-medium text-gray-600"},_t={key:1,class:"text-sm font-bold text-blue-600 truncate max-w-[200px]"},Mt={class:"grid grid-cols-2 gap-4"},jt={class:"space-y-4"},At=["onClick"],zt={class:"mb-3"},Bt={class:"block text-[10px] font-bold text-gray-500 uppercase mb-1"},St=["onUpdate:modelValue"],Vt=["value"],Lt={class:"space-y-2"},Pt=["onUpdate:modelValue"],Ft=["value"],Ht=["onClick"],Ut=["onClick"],Dt={class:"pt-2 border-t mt-2"},Tt={class:"flex items-center gap-2 mb-2"},$t={key:0},Et={class:"p-5 border-t border-gray-100 flex gap-3"},Nt=["disabled"],Ot={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},It={class:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6 text-center"},Rt={class:"text-sm text-gray-500 mb-4"},qt={class:"flex gap-2"},Wt={type:"submit",class:"flex-1 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-sm font-bold"},Jt={key:2,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-fade-in"},Kt={class:"bg-gray-900 rounded-xl shadow-2xl w-full max-w-6xl h-[85vh] flex flex-col overflow-hidden relative"},Qt={class:"flex items-center justify-between px-4 py-3 bg-white/5 border-b border-white/10"},Xt={class:"text-white font-medium truncate max-w-md"},Zt={class:"flex-1 bg-black/50 flex items-center justify-center relative overflow-hidden"},Gt={key:0,class:"w-full h-full overflow-auto flex items-center justify-center p-4"},Yt=["src"],eo={class:"absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-4 bg-gray-800/80 backdrop-blur-md px-4 py-2 rounded-full text-white shadow-xl border border-white/10 z-20"},to=["disabled"],oo={class:"font-mono text-sm min-w-[3ch] text-center"},so=["disabled"],lo=["src"],ro={key:2,class:"w-full h-full bg-gray-100 overflow-auto p-8 flex justify-center"},no={key:0,class:"flex flex-col items-center justify-center p-10"},ao={key:1,class:"text-red-500 p-4 text-center bg-red-50 rounded-lg border border-red-200"},io={key:3,class:"w-full h-full bg-white overflow-auto p-4"},uo={key:0,class:"flex flex-col items-center justify-center p-10"},co={key:1,class:"text-red-500 p-4 text-center bg-red-50 rounded-lg border border-red-200"},po={key:4,class:"w-full h-full flex flex-col items-center justify-center p-10 text-center bg-gray-50"},fo={key:5,class:"text-center p-10"},go={__name:"Index",props:{reports:Array,airportStats:Array,airlineStats:Array,airports:Array,airlines:Array},setup(L){const T=L,$=p(""),_=p("All"),M=p("All"),P=p(!1),E=p(!1),B=p(!1),h=p(""),x=p(null),F=p("download"),I=p(!1),y=p(null),b=p(1),H=p(null),R=p(null),S=p(!1),j=p(null),a=G({name:"",start_date:"",end_date:"",file:null,is_secure:!1,password:"",locations:[{airport_id:"",airlines:[""]}]}),J=z(()=>{const s={};N.value.forEach(n=>{n.locations.forEach(o=>{(M.value==="All"||o.airlines.some(d=>d.id===M.value))&&(s[o.airport]||(s[o.airport]=0),s[o.airport]++)})});let t=Object.entries(s).map(([n,o])=>({name:n,count:o}));if(_.value!=="All"){const n=T.airports.find(o=>o.id===_.value);n?t=t.filter(o=>o.name===n.name):t=[]}return t.sort((n,o)=>o.count-n.count)}),q=z(()=>{const s={};N.value.forEach(n=>{n.locations.forEach(o=>{(_.value==="All"||o.airport_id===_.value)&&o.airlines.forEach(d=>{s[d.name]||(s[d.name]=0),s[d.name]++})})});let t=Object.entries(s).map(([n,o])=>{const i=T.airlines.find(d=>d.name===n);return{name:n,count:o,color:i?.color||"#3b82f6"}});if(M.value!=="All"){const n=T.airlines.find(o=>o.id===M.value);n?t=t.filter(o=>o.name===n.name):t=[]}return t.sort((n,o)=>o.count-n.count)}),te=z(()=>({chart:{type:"bar",toolbar:{show:!1},fontFamily:"Inter, sans-serif"},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%"}},dataLabels:{enabled:!1},xaxis:{categories:J.value.map(s=>s.name),labels:{style:{colors:"#64748b"},formatter:s=>Math.floor(s)},forceNiceScale:!0,tickAmount:5},yaxis:{labels:{style:{colors:"#64748b",fontSize:"11px"}}},colors:["#3b82f6"],grid:{borderColor:"#f1f5f9",strokeDashArray:4},tooltip:{theme:"light",y:{formatter:s=>Math.floor(s)}}})),oe=z(()=>[{name:"Frekuensi",data:J.value.map(s=>s.count)}]),se=z(()=>({chart:{type:"bar",toolbar:{show:!1},fontFamily:"Inter, sans-serif"},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"70%",distributed:!0}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},offsetX:0},xaxis:{categories:q.value.map(s=>s.name),labels:{style:{colors:"#64748b"},formatter:s=>Math.floor(s)}},yaxis:{labels:{show:!0,style:{colors:"#64748b",fontSize:"11px",fontWeight:700},maxWidth:200}},colors:q.value.map(s=>s.color||"#3b82f6"),legend:{show:!1},grid:{borderColor:"#f1f5f9",strokeDashArray:4},tooltip:{theme:"light",y:{formatter:s=>Math.floor(s)}}})),le=z(()=>[{name:"Frekuensi",data:q.value.map(s=>({x:s.name,y:s.count}))}]),re=s=>{E.value=!1;const t=s.dataTransfer.files;t.length>0&&(a.file=t[0],a.name||(a.name=t[0].name.split(".").slice(0,-1).join(".")))},ne=s=>{const t=s.target.files;t.length>0&&(a.file=t[0],a.name||(a.name=t[0].name.split(".").slice(0,-1).join(".")))},ae=()=>{a.locations.push({airport_id:"",airlines:[""]})},ie=s=>{a.locations.splice(s,1)},de=s=>{a.locations[s].airlines.push("")},ue=(s,t)=>{a.locations[s].airlines.splice(t,1)},K=()=>{a.post(route("supervision-reports.store"),{onSuccess:()=>{P.value=!1,a.reset()}})},N=z(()=>{let s=T.reports;if($.value){const t=$.value.toLowerCase();s=s.filter(n=>n.name.toLowerCase().includes(t))}return _.value!=="All"&&(s=s.filter(t=>t.locations.some(n=>n.airport_id===_.value))),M.value!=="All"&&(s=s.filter(t=>t.locations.some(n=>n.airlines.some(o=>o.id===M.value)))),s}),ce=s=>{if(!s)return"default";const t=s.split(".").pop().toLowerCase();return["pdf"].includes(t)?"pdf":["doc","docx"].includes(t)?"word":["xls","xlsx","csv"].includes(t)?"excel":["ppt","pptx"].includes(t)?"ppt":["jpg","jpeg","png","gif","webp"].includes(t)?"image":["zip","rar"].includes(t)?"zip":"default"},pe=s=>{confirm("Are you sure you want to delete this report?")&&G({}).delete(route("supervision-reports.destroy",s.id))},W=s=>{s.is_secure?(x.value=s,h.value="",F.value="download",B.value=!0):Q(route("supervision-reports.download",s.id),{})},fe=async()=>{if(x.value){if(F.value==="download")Q(route("supervision-reports.download",x.value.id),{password:h.value}),B.value=!1,h.value="",x.value=null;else if(F.value==="preview")try{await Ce.post(route("supervision-reports.verify-password",x.value.id),{password:h.value});const s=x.value;B.value=!1,h.value="",x.value=null,X(s)}catch{alert("Incorrect password."),h.value=""}}},Q=(s,t)=>{const n=document.createElement("form");n.method="POST",n.action=s;const o=document.querySelector('meta[name="csrf-token"]');if(o){const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=o.getAttribute("content"),n.appendChild(i)}for(const i in t){const d=document.createElement("input");d.type="hidden",d.name=i,d.value=t[i],n.appendChild(d)}document.body.appendChild(n),n.submit(),document.body.removeChild(n)},k=z(()=>{if(!y.value)return null;const t=y.value.file_path.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(t)?"image":["pdf"].includes(t)?"pdf":["doc","docx"].includes(t)?"word":["xls","xlsx","csv"].includes(t)?"excel":["ppt","pptx"].includes(t)?"ppt":"other"}),ve=s=>{s.is_secure?(x.value=s,h.value="",F.value="preview",B.value=!0):X(s)},X=async s=>{if(y.value=s,b.value=1,I.value=!0,j.value=null,k.value==="word"||k.value==="excel"){S.value=!0;try{const t=await fetch(s.file_path);if(!t.ok)throw new Error("Failed to load file");const n=await t.blob();if(await _e(),k.value==="word")H.value&&(H.value.innerHTML="",await je(n,H.value,H.value,{className:"docx-preview",inWrapper:!0}));else if(k.value==="excel"&&R.value){const o=await n.arrayBuffer(),i=Ae(o),d=i.SheetNames[0],A=i.Sheets[d],m=ze.sheet_to_html(A,{id:"excel-table",editable:!1});R.value.innerHTML=m}}catch(t){console.error("Error rendering office file:",t),j.value="Failed to render preview."}finally{S.value=!1}}},Z=()=>{I.value=!1,y.value=null,b.value=1},be=()=>{b.value<3&&(b.value+=.25)},xe=()=>{b.value>.5&&(b.value-=.25)};return(s,t)=>{const n=me("apexchart");return r(),l(w,null,[U(u(ge),{title:"Laporan Hasil Pengawasan"}),U(Me,null,{default:Y(()=>[e("div",Be,[e("div",Se,[t[24]||(t[24]=e("div",{class:"absolute inset-0 bg-[radial-gradient(rgba(255,255,255,0.15)_1px,transparent_1px)] [background-size:20px_20px]"},null,-1)),t[25]||(t[25]=e("div",{class:"absolute inset-0 bg-white/5 backdrop-blur-[1px]"},null,-1)),t[26]||(t[26]=e("div",{class:"absolute -top-20 -right-20 h-80 w-80 rounded-full bg-sky-400/20 blur-3xl mix-blend-overlay"},null,-1)),t[27]||(t[27]=e("div",{class:"absolute -bottom-20 -left-20 h-80 w-80 rounded-full bg-blue-900/40 blur-3xl"},null,-1)),e("div",Ve,[e("div",Le,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-4xl font-extrabold text-white tracking-tight drop-shadow-md"},"Page File"),e("p",{class:"text-blue-100 text-sm mt-1 font-medium opacity-90"},"Manage and organize your documents.")],-1)),e("div",Pe,[e("button",{onClick:t[0]||(t[0]=o=>P.value=!0),class:"bg-white text-blue-900 hover:bg-blue-50 px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-md hover:shadow-lg flex items-center gap-2"},[...t[18]||(t[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" Upload File ",-1)])])])]),e("div",Fe,[e("div",He,[t[20]||(t[20]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-blue-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>$.value=o),type:"text",placeholder:"Search files...",class:"block w-full rounded-2xl border border-white/20 bg-white/10 backdrop-blur-md py-4 pl-12 pr-12 text-white placeholder-blue-200 shadow-xl focus:border-white/40 focus:bg-white/20 focus:ring-0 focus:outline-none transition-all"},null,512),[[V,$.value]]),t[21]||(t[21]=e("button",{class:"absolute inset-y-0 right-2 flex items-center px-4 text-white hover:text-blue-100 transition-colors"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",Ue,[U(u(we),{href:s.route("files.index"),class:"p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-md"},{default:Y(()=>[...t[22]||(t[22]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t[23]||(t[23]=e("div",null,[e("h2",{class:"text-3xl font-bold text-white tracking-tight"},"Laporan Hasil Pengawasan"),e("p",{class:"text-blue-100 text-sm font-medium opacity-80"},"Manage your laporan hasil pengawasan files.")],-1))])])]),e("div",De,[e("div",Te,[e("div",$e,[e("div",Ee,[t[30]||(t[30]=e("h3",{class:"font-bold text-gray-700 flex items-center gap-2"},[e("span",{class:"w-1 h-5 bg-red-400 rounded-full"}),g(" Frekuensi Pengawasan Bandara ")],-1)),e("div",Ne,[f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>_.value=o),class:"w-full appearance-none rounded-lg border border-gray-200 bg-gray-50 py-1.5 pl-3 pr-8 text-xs font-medium text-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none cursor-pointer"},[t[28]||(t[28]=e("option",{value:"All"},"All Airports",-1)),(r(!0),l(w,null,C(L.airports,o=>(r(),l("option",{key:o.id,value:o.id},c(o.name),9,Oe))),128))],512),[[O,_.value]]),t[29]||(t[29]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500"},[e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",Ie,[U(n,{options:te.value,series:oe.value,height:"100%"},null,8,["options","series"])])]),e("div",Re,[e("div",qe,[t[33]||(t[33]=e("h3",{class:"font-bold text-gray-700 flex items-center gap-2"},[e("span",{class:"w-1 h-5 bg-blue-400 rounded-full"}),g(" Frekuensi Maskapai ")],-1)),e("div",We,[f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>M.value=o),class:"w-full appearance-none rounded-lg border border-gray-200 bg-gray-50 py-1.5 pl-3 pr-8 text-xs font-medium text-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none cursor-pointer"},[t[31]||(t[31]=e("option",{value:"All"},"All Airlines",-1)),(r(!0),l(w,null,C(L.airlines,o=>(r(),l("option",{key:o.id,value:o.id},c(o.name),9,Je))),128))],512),[[O,M.value]]),t[32]||(t[32]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500"},[e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",Ke,[U(n,{options:se.value,series:le.value,height:"100%"},null,8,["options","series"])])])]),e("div",Qe,[t[41]||(t[41]=e("div",{class:"p-4 border-b border-gray-100 flex items-center gap-3"},[e("span",{class:"w-1 h-5 bg-orange-400 rounded-full"}),e("h3",{class:"font-bold text-gray-800 uppercase text-sm tracking-wide"},"Laporan Hasil Pengawasan")],-1)),e("div",Xe,[e("table",Ze,[t[40]||(t[40]=e("thead",{class:"bg-gray-50 text-xs uppercase font-semibold text-gray-500"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Name"),e("th",{class:"px-6 py-4"},"Tanggal Pengawasan"),e("th",{class:"px-6 py-4"},"Lokasi & Maskapai"),e("th",{class:"px-6 py-4"},"Size"),e("th",{class:"px-6 py-4"},"Modified"),e("th",{class:"px-6 py-4 text-right"},"Actions")])],-1)),e("tbody",Ge,[(r(!0),l(w,null,C(N.value,o=>(r(),l("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Ye,[e("div",et,[e("div",tt,[g(c(ce(o.file_path).substring(0,3))+" ",1),o.is_secure?(r(),l("span",ot,[...t[34]||(t[34]=[e("svg",{class:"w-3 h-3 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})],-1)])])):v("",!0)]),e("div",st,[e("span",null,c(o.name),1),o.is_secure?(r(),l("span",lt,[...t[35]||(t[35]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),g(" SECURE ",-1)])])):v("",!0)])])]),e("td",rt,c(o.start_date)+" - "+c(o.end_date),1),e("td",nt,[e("div",at,[(r(!0),l(w,null,C(o.locations,(i,d)=>(r(),l("div",{key:d,class:"text-xs"},[e("div",it,c(i.airport),1),e("div",dt,[(r(!0),l(w,null,C(i.airlines,(A,m)=>(r(),l("span",{key:m,class:"px-2 py-0.5 rounded text-[10px] font-medium bg-blue-50 text-blue-600 border border-blue-100"},c(A.name),1))),128))])]))),128))])]),e("td",ut,c(o.file_size),1),e("td",ct,c(o.modified),1),e("td",pt,[e("div",ft,[e("button",{onClick:i=>ve(o),class:"text-green-600 hover:text-green-900 p-1.5 hover:bg-green-50 rounded-full transition-colors",title:"Preview"},[...t[36]||(t[36]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,vt),e("button",{onClick:i=>W(o),class:"text-blue-600 hover:text-blue-900 p-1.5 hover:bg-blue-50 rounded-full transition-colors",title:"Download"},[...t[37]||(t[37]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])],8,bt),s.$page.props.auth.user?(r(),l("button",{key:0,onClick:i=>pe(o),class:"text-red-500 hover:text-red-700 p-1.5 hover:bg-red-50 rounded-full transition-colors",title:"Delete"},[...t[38]||(t[38]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,xt)):v("",!0)])])]))),128)),N.value.length===0?(r(),l("tr",mt,[...t[39]||(t[39]=[e("td",{colspan:"6",class:"px-6 py-8 text-center text-gray-400 italic"},"No reports found.",-1)])])):v("",!0)])])])])])]),P.value?(r(),l("div",gt,[e("div",wt,[e("div",ht,[t[43]||(t[43]=e("h3",{class:"font-bold text-lg text-gray-800"},"Upload File",-1)),e("button",{onClick:t[4]||(t[4]=o=>{P.value=!1,u(a).reset()}),class:"text-gray-400 hover:text-gray-600 transition-colors"},[...t[42]||(t[42]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",yt,[e("form",{onSubmit:D(K,["prevent"]),class:"space-y-5"},[e("div",{onDragover:t[5]||(t[5]=D(o=>E.value=!0,["prevent"])),onDragleave:t[6]||(t[6]=D(o=>E.value=!1,["prevent"])),onDrop:D(re,["prevent"]),class:he(["border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors relative group",E.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"])},[e("input",{type:"file",onChange:ne,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"fileInput"},null,32),e("div",kt,[t[44]||(t[44]=e("div",{class:"w-12 h-12 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),u(a).file?(r(),l("span",_t,c(u(a).file.name),1)):(r(),l("span",Ct,"Click to browse or drag file here")),t[45]||(t[45]=e("span",{class:"text-xs text-gray-400 mt-1"},"Supported files: PDF, DOC, ZIP, APK, Images",-1))])],34),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Nama File",-1)),f(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>u(a).name=o),type:"text",placeholder:"File name",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[V,u(a).name]])]),e("div",Mt,[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Tanggal Mulai",-1)),f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>u(a).start_date=o),type:"date",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[V,u(a).start_date]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Tanggal Selesai",-1)),f(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>u(a).end_date=o),type:"date",class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[V,u(a).end_date]])])]),e("div",jt,[e("div",{class:"flex justify-between items-end border-b border-gray-100 pb-1"},[t[49]||(t[49]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Lokasi Pengawasan",-1)),e("button",{type:"button",onClick:ae,class:"text-xs font-bold text-blue-600 hover:underline"},"+ Tambah Lokasi")]),(r(!0),l(w,null,C(u(a).locations,(o,i)=>(r(),l("div",{key:i,class:"bg-gray-50 p-4 rounded-xl border border-gray-200 relative group"},[u(a).locations.length>1?(r(),l("button",{key:0,type:"button",onClick:d=>ie(i),class:"absolute top-2 right-2 text-red-400 hover:text-red-600 p-1"},[...t[50]||(t[50]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,At)):v("",!0),e("div",zt,[e("label",Bt,"Lokasi "+c(i+1)+" - Bandara",1),f(e("select",{"onUpdate:modelValue":d=>o.airport_id=d,class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white"},[t[51]||(t[51]=e("option",{value:"",disabled:""},"Select Airport",-1)),(r(!0),l(w,null,C(L.airports,d=>(r(),l("option",{key:d.id,value:d.id},c(d.name),9,Vt))),128))],8,St),[[O,o.airport_id]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1"},"Maskapai",-1)),e("div",Lt,[(r(!0),l(w,null,C(o.airlines,(d,A)=>(r(),l("div",{key:A,class:"flex gap-2"},[f(e("select",{"onUpdate:modelValue":m=>o.airlines[A]=m,class:"w-full rounded-lg border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white"},[t[52]||(t[52]=e("option",{value:"",disabled:""},"Select Airline",-1)),(r(!0),l(w,null,C(L.airlines,m=>(r(),l("option",{key:m.id,value:m.id},c(m.name),9,Ft))),128))],8,Pt),[[O,o.airlines[A]]]),o.airlines.length>1?(r(),l("button",{key:0,type:"button",onClick:m=>ue(i,A),class:"text-red-400 hover:text-red-600 px-1"},[...t[53]||(t[53]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ht)):v("",!0)]))),128))]),e("button",{type:"button",onClick:d=>de(i),class:"mt-2 text-xs font-bold text-blue-600 hover:underline inline-flex items-center gap-1"},[...t[54]||(t[54]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" Tambah Maskapai ",-1)])],8,Ut)])]))),128))]),e("div",Dt,[e("div",Tt,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>u(a).is_secure=o),id:"secureCheck",class:"rounded text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[ye,u(a).is_secure]]),t[56]||(t[56]=e("label",{for:"secureCheck",class:"text-sm font-bold text-gray-700 flex items-center gap-1"},[e("svg",{class:"w-4 h-4 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),g(" Secure File ")],-1))]),u(a).is_secure?(r(),l("div",$t,[t[57]||(t[57]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase mb-1"},"Set Password",-1)),f(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>u(a).password=o),type:"text",placeholder:"Enter password",class:"w-full rounded-lg border-orange-300 focus:ring-orange-500 focus:border-orange-500 bg-orange-50 text-sm",required:""},null,512),[[V,u(a).password]]),t[58]||(t[58]=e("p",{class:"text-[10px] text-gray-500 mt-1"},"Users must enter this password to download or view the file.",-1))])):v("",!0)])],32)]),e("div",Et,[e("button",{onClick:t[12]||(t[12]=o=>{P.value=!1,u(a).reset()}),class:"flex-1 py-2.5 bg-white border border-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors"},"Cancel"),e("button",{onClick:K,disabled:u(a).processing,class:"flex-1 py-2.5 bg-blue-500/90 hover:bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50"},"Upload",8,Nt)])])])):v("",!0),B.value?(r(),l("div",Ot,[e("div",It,[t[61]||(t[61]=e("div",{class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-orange-100 mb-4"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),t[62]||(t[62]=e("h3",{class:"text-lg font-bold mb-2"},"Restricted Access",-1)),e("p",Rt,[t[59]||(t[59]=g("Enter the password to unlock ",-1)),e("strong",null,c(x.value?.name),1),t[60]||(t[60]=g(".",-1))]),e("form",{onSubmit:D(fe,["prevent"])},[f(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>h.value=o),type:"password",placeholder:"File Password",class:"w-full rounded-lg border-gray-300 mb-4 text-center tracking-widest",autoFocus:"",required:""},null,512),[[V,h.value]]),e("div",qt,[e("button",{type:"button",onClick:t[14]||(t[14]=o=>{B.value=!1,x.value=null}),class:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm"},"Cancel"),e("button",Wt,c(F.value==="preview"?"Unlock & Preview":"Unlock & Download"),1)])],32)])])):v("",!0),I.value?(r(),l("div",Jt,[e("div",Kt,[e("div",Qt,[e("h3",Xt,c(y.value?.name),1),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:Z,class:"text-gray-400 hover:text-white transition-colors bg-white/10 hover:bg-white/20 rounded-full p-1.5"},[...t[63]||(t[63]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Zt,[k.value==="image"?(r(),l("div",Gt,[e("img",{src:y.value.file_path,style:ke({transform:`scale(${b.value})`}),class:"max-w-full max-h-full object-contain transition-transform duration-200 ease-out origin-center"},null,12,Yt),e("div",eo,[e("button",{onClick:xe,class:"hover:text-blue-400 p-1 disabled:opacity-50",disabled:b.value<=.5},[...t[64]||(t[64]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,to),e("span",oo,c(Math.round(b.value*100))+"%",1),e("button",{onClick:be,class:"hover:text-blue-400 p-1 disabled:opacity-50",disabled:b.value>=3},[...t[65]||(t[65]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,so),e("button",{onClick:t[15]||(t[15]=o=>b.value=1),class:"ml-2 text-xs text-gray-400 hover:text-white border-l border-gray-600 pl-3"},"Reset")])])):k.value==="pdf"?(r(),l("iframe",{key:1,src:y.value.file_path,class:"w-full h-full bg-white"},null,8,lo)):k.value==="word"?(r(),l("div",ro,[S.value?(r(),l("div",no,[...t[66]||(t[66]=[e("svg",{class:"animate-spin h-10 w-10 text-blue-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-gray-500 font-medium"},"Loading document...",-1)])])):j.value?(r(),l("div",ao,c(j.value),1)):v("",!0),f(e("div",{ref_key:"docxContainer",ref:H,class:"bg-white shadow-lg p-8 min-h-[800px] w-full max-w-4xl"},null,512),[[ee,!S.value&&!j.value]])])):k.value==="excel"?(r(),l("div",io,[S.value?(r(),l("div",uo,[...t[67]||(t[67]=[e("svg",{class:"animate-spin h-10 w-10 text-green-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-gray-500 font-medium"},"Loading spreadsheet...",-1)])])):j.value?(r(),l("div",co,c(j.value),1)):v("",!0),f(e("div",{ref_key:"excelContainer",ref:R,class:"excel-preview-container prose max-w-none"},null,512),[[ee,!S.value&&!j.value]])])):k.value==="ppt"?(r(),l("div",po,[t[69]||(t[69]=e("div",{class:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-10 h-10 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})])],-1)),t[70]||(t[70]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Preview Not Available Locally",-1)),t[71]||(t[71]=e("p",{class:"text-gray-500 mb-6 max-w-sm"}," PowerPoint previews require a public server. Please download the file to view it. ",-1)),e("button",{onClick:t[16]||(t[16]=o=>W(y.value)),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2"},[...t[68]||(t[68]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),g(" Download Presentation ",-1)])])])):(r(),l("div",fo,[t[72]||(t[72]=e("div",{class:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[73]||(t[73]=e("h3",{class:"text-xl font-bold text-white mb-2"},"Preview Unavailable",-1)),t[74]||(t[74]=e("p",{class:"text-gray-400 mb-6"},"This file type cannot be previewed directly.",-1)),e("button",{onClick:t[17]||(t[17]=o=>{W(y.value),Z()}),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"},"Download File")]))])])])):v("",!0)]),_:1})],64)}}};export{go as default};
