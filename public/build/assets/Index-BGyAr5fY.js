import{u as b,g as n,a as v,d as o,h as E,w as N,b as e,i as c,m as f,o as a,F as w,q as S,t as x,n as F,e as _,j as d,p as u,s as k,v as p}from"./app-De8mb7Sa.js";import{A as D}from"./AuthenticatedLayout-BBycf8fi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"min-h-screen bg-gray-50 pb-20"},$={class:"bg-indigo-600 px-4 py-8 shadow-sm"},q={class:"mx-auto max-w-7xl"},j={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},P={class:"mx-auto max-w-7xl px-4 mt-8"},z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg border border-gray-200"},B={class:"min-w-full divide-y divide-gray-200"},L={class:"divide-y divide-gray-200"},O={class:"px-6 py-4 whitespace-nowrap"},I={class:"flex items-center"},T={class:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-xs mr-3"},G={class:"text-sm font-bold text-gray-900"},H={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-6 py-4 whitespace-nowrap text-right text-sm"},Q=["onClick"],W=["onClick"],X={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},Y={class:"w-full max-w-md bg-white rounded-xl shadow-xl p-6"},Z={key:0,class:"space-y-3 pt-2"},ee={class:"flex items-center gap-2"},se={class:"flex items-center gap-2"},te={class:"flex items-center gap-2"},oe={class:"flex gap-2 pt-2"},le=["disabled"],ie={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},de={class:"w-full max-w-md bg-white rounded-xl shadow-xl p-6"},re={key:0,class:"space-y-3 pt-2"},ne={class:"flex items-center gap-2"},ae={class:"flex items-center gap-2"},ue={class:"flex items-center gap-2"},pe={class:"flex gap-2 pt-2"},ce=["disabled"],be={__name:"Index",props:{users:Array},setup(U){const g=f(!1),m=f(!1),y=f(null),i=b({name:"",email:"",password:"",role:"admin",permissions:{read_only:!1,access_directory:!0,access_files:!0}}),l=b({name:"",email:"",password:"",role:"admin",permissions:{read_only:!1,access_directory:!0,access_files:!0}}),A=()=>{i.post(route("users.store"),{onSuccess:()=>{g.value=!1,i.reset()}})},C=r=>{y.value=r,l.name=r.name,l.email=r.email,l.role=r.role,l.password="";const s=r.permissions||{};l.permissions.read_only=s.read_only??!1,l.permissions.access_directory=s.access_directory??!0,l.permissions.access_files=s.access_files??!0,m.value=!0},V=()=>{l.put(route("users.update",y.value.id),{onSuccess:()=>{m.value=!1,l.reset()}})},M=r=>{confirm(`Are you sure you want to delete ${r.name}?`)&&b({}).delete(route("users.destroy",r.id))};return(r,s)=>(a(),n(w,null,[v(o(E),{title:"User Management"}),v(D,null,{default:N(()=>[e("div",R,[e("div",$,[e("div",q,[e("div",j,[s[17]||(s[17]=e("div",null,[e("h1",{class:"text-3xl font-bold text-white"},"User Management"),e("p",{class:"text-indigo-200 text-sm"},"Manage systems accounts and permissions.")],-1)),e("button",{onClick:s[0]||(s[0]=t=>g.value=!0),class:"bg-indigo-500 hover:bg-indigo-400 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors"}," + Add New User ")])])]),e("div",P,[e("div",z,[e("table",B,[s[18]||(s[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",L,[(a(!0),n(w,null,S(U.users,t=>(a(),n("tr",{key:t.id,class:"hover:bg-gray-50 transition-colors"},[e("td",O,[e("div",I,[e("div",T,x(t.name.charAt(0)),1),e("div",G,x(t.name),1)])]),e("td",H,x(t.email),1),e("td",J,[e("span",{class:F(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",t.role==="superadmin"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"])},x(t.role),3)]),e("td",K,[e("button",{onClick:h=>C(t),class:"text-indigo-600 hover:text-indigo-900 font-bold mr-4"},"Edit",8,Q),t.id!==r.$page.props.auth.user.id?(a(),n("button",{key:0,onClick:h=>M(t),class:"text-red-500 hover:text-red-700 font-bold"}," Delete ",8,W)):c("",!0)])]))),128))])])])])]),g.value?(a(),n("div",X,[e("div",Y,[s[28]||(s[28]=e("h2",{class:"text-lg font-bold mb-4 text-gray-900"},"Add New User",-1)),e("form",{onSubmit:_(A,["prevent"]),class:"space-y-4"},[e("div",null,[s[19]||(s[19]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Full Name",-1)),d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o(i).name=t),type:"text",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[u,o(i).name]])]),e("div",null,[s[20]||(s[20]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Email Address",-1)),d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o(i).email=t),type:"email",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[u,o(i).email]])]),e("div",null,[s[21]||(s[21]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Password",-1)),d(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o(i).password=t),type:"password",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[u,o(i).password]])]),e("div",null,[s[23]||(s[23]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Role",-1)),d(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o(i).role=t),class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"},[...s[22]||(s[22]=[e("option",{value:"admin"},"Admin (Author)",-1),e("option",{value:"superadmin"},"Superadmin (User Manager)",-1)])],512),[[k,o(i).role]])]),o(i).role==="admin"?(a(),n("div",Z,[s[27]||(s[27]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase border-b pb-1"},"Permissions",-1)),e("div",ee,[d(e("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=t=>o(i).permissions.read_only=t),id:"add_read_only",class:"rounded text-indigo-600 focus:ring-indigo-500"},null,512),[[p,o(i).permissions.read_only]]),s[24]||(s[24]=e("label",{for:"add_read_only",class:"text-sm text-gray-700"},"Read Only Mode (Cannot Create/Edit/Delete)",-1))]),e("div",se,[d(e("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=t=>o(i).permissions.access_directory=t),id:"add_access_directory",class:"rounded text-indigo-600 focus:ring-indigo-500"},null,512),[[p,o(i).permissions.access_directory]]),s[25]||(s[25]=e("label",{for:"add_access_directory",class:"text-sm text-gray-700"},"Access Directory",-1))]),e("div",te,[d(e("input",{type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=t=>o(i).permissions.access_files=t),id:"add_access_files",class:"rounded text-indigo-600 focus:ring-indigo-500"},null,512),[[p,o(i).permissions.access_files]]),s[26]||(s[26]=e("label",{for:"add_access_files",class:"text-sm text-gray-700"},"Access File Repository",-1))])])):c("",!0),e("div",oe,[e("button",{type:"button",onClick:s[8]||(s[8]=t=>g.value=!1),class:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"},"Cancel"),e("button",{type:"submit",disabled:o(i).processing,class:"flex-1 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"},"Save",8,le)])],32)])])):c("",!0),m.value?(a(),n("div",ie,[e("div",de,[s[38]||(s[38]=e("h2",{class:"text-lg font-bold mb-4 text-gray-900"},"Edit User",-1)),e("form",{onSubmit:_(V,["prevent"]),class:"space-y-4"},[e("div",null,[s[29]||(s[29]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Full Name",-1)),d(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>o(l).name=t),type:"text",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[u,o(l).name]])]),e("div",null,[s[30]||(s[30]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Email Address",-1)),d(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>o(l).email=t),type:"email",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 focus:border-indigo-500",required:""},null,512),[[u,o(l).email]])]),e("div",null,[s[31]||(s[31]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"New Password (Optional)",-1)),d(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>o(l).password=t),type:"password",class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Leave blank to keep current"},null,512),[[u,o(l).password]])]),e("div",null,[s[33]||(s[33]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase"},"Role",-1)),d(e("select",{"onUpdate:modelValue":s[12]||(s[12]=t=>o(l).role=t),class:"w-full rounded-lg border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"},[...s[32]||(s[32]=[e("option",{value:"admin"},"Admin (Author)",-1),e("option",{value:"superadmin"},"Superadmin (User Manager)",-1)])],512),[[k,o(l).role]])]),o(l).role==="admin"?(a(),n("div",re,[s[37]||(s[37]=e("label",{class:"block text-xs font-bold text-gray-500 uppercase border-b pb-1"},"Permissions",-1)),e("div",ne,[d(e("input",{type:"checkbox","onUpdate:modelValue":s[13]||(s[13]=t=>o(l).permissions.read_only=t),id:"edit_read_only",class:"rounded text-indigo-600 focus:ring-indigo-500"},null,512),[[p,o(l).permissions.read_only]]),s[34]||(s[34]=e("label",{for:"edit_read_only",class:"text-sm text-gray-700"},"Read Only Mode (Cannot Create/Edit/Delete)",-1))]),e("div",ae,[d(e("input",{type:"checkbox","onUpdate:modelValue":s[14]||(s[14]=t=>o(l).permissions.access_directory=t),id:"edit_access_directory",class:"rounded text-indigo-600 focus:ring-indigo-500"},null,512),[[p,o(l).permissions.access_directory]]),s[35]||(s[35]=e("label",{for:"edit_access_directory",class:"text-sm text-gray-700"},"Access Directory",-1))]),e("div",ue,[d(e("input",{type:"checkbox","onUpdate:modelValue":s[15]||(s[15]=t=>o(l).permissions.access_files=t),id:"edit_access_files",class:"rounded text-indigo-600 focus:ring-indigo-500"},null,512),[[p,o(l).permissions.access_files]]),s[36]||(s[36]=e("label",{for:"edit_access_files",class:"text-sm text-gray-700"},"Access File Repository",-1))])])):c("",!0),e("div",pe,[e("button",{type:"button",onClick:s[16]||(s[16]=t=>m.value=!1),class:"flex-1 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"},"Cancel"),e("button",{type:"submit",disabled:o(l).processing,class:"flex-1 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"},"Update",8,ce)])],32)])])):c("",!0)]),_:1})],64))}};export{be as default};
